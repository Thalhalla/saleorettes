#!/bin/sh

echo -n "wait on Tiller to become available"
sleep 5

for i in {1..150}; do # timeout for 15 minutes
  echo -n '.'
  RESULT=$(kubectl get po --namespace=kube-system | grep tiller | grep Running)
  if [ "$RESULT" ]; then
      sleep 3
      echo "$RESULT"
      break
  fi
  sleep 6
done

sleep 3
echo -e "\nTiller is now up and running. Helm commands are now able to interact with Minikube cluster"
sleep 3
kubectl get po --namespace=kube-system | grep tiller
sleep 3
